## 安全认证

### 二维码登录

Spring Cloud和OAuth2结合实现二维码登录的过程，包括用户确认授权的流程：

1. 客户端应用程序生成一个随机的二维码字符串，并将其保存到数据库或其他数据存储介质中。同时，客户端应用程序向OAuth2认证服务器发送请求，请求使用这个二维码字符串作为凭证进行认证。

2. OAuth2认证服务器接收到请求后，会从数据库或其他数据存储介质中查找这个二维码字符串所对应的客户端信息。

3. 如果查找成功，OAuth2认证服务器会在Web页面上展示给用户一个授权页面，该页面包含客户端应用程序请求的访问权限和用户信息，并要求用户确认授权。

4. 用户在授权页面上点击确认授权后，OAuth2认证服务器会生成一个授权码（Authorization Code），并将其保存到数据库或其他数据存储介质中。

5. 客户端应用程序定时向OAuth2认证服务器发送请求，查询这个授权码是否已经生成。如果已经生成，客户端应用程序会使用这个授权码向OAuth2认证服务器请求访问令牌（Access Token）。

6. OAuth2认证服务器接收到请求后，会验证授权码的有效性，并根据客户端的信息和用户的身份信息生成一个访问令牌，最终返回给客户端应用程序。

7. 客户端应用程序在收到访问令牌后，可以将其保存到本地，以便在后续的API调用中使用。

总之，用户确认授权的流程是在OAuth2认证服务器展示授权页面并要求用户确认授权后完成的，该过程是OAuth2认证和授权的关键步骤之一。在用户确认授权后，OAuth2认证服务器会生成授权码，并将其返回给客户端应用程序，最终完成认证和授权的过程。
